

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contact matrix class &mdash; PyRoss 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Forecasting" href="forecast.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> PyRoss
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="deterministic.html">Deterministic simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="stochastic.html">Stochastic simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="hybrid.html">Hybrid simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="inference.html">Bayesian inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="control.html">Control with Non-Pharmaceutical interventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="forecast.html">Forecasting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contact matrix class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#contact-matrix-function">Contact Matrix Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spatial-contact-matrix">Spatial Contact Matrix</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyRoss</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Contact matrix class</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/contact_matrix.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contact-matrix-class">
<h1>Contact matrix class<a class="headerlink" href="#contact-matrix-class" title="Permalink to this headline">¶</a></h1>
<div class="section" id="contact-matrix-function">
<h2>Contact Matrix Function<a class="headerlink" href="#contact-matrix-function" title="Permalink to this headline">¶</a></h2>
<p>Generates contact matrix for given interventions</p>
<dl class="py class">
<dt id="pyross.contactMatrix.ContactMatrixFunction">
<em class="property">class </em><code class="sig-prename descclassname">pyross.contactMatrix.</code><code class="sig-name descname">ContactMatrixFunction</code><a class="headerlink" href="#pyross.contactMatrix.ContactMatrixFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a time dependent contact matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>CH</strong> (<em>2d np.array</em>) – Contact matrix at home</p></li>
<li><p><strong>CW</strong> (<em>2d np.array</em>) – Contact matrix at work</p></li>
<li><p><strong>CS</strong> (<em>2d np.array</em>) – Contact matrix at school</p></li>
<li><p><strong>CO</strong> (<em>2d np.array</em>) – Contact matrix at other locations</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="pyross.contactMatrix.ContactMatrixFunction.constant_contactMatrix">
<code class="sig-name descname">constant_contactMatrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyross.contactMatrix.ContactMatrixFunction.constant_contactMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant contact matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aW</strong> (<em>float</em><em>, </em><em>optional</em>) – Scale factor for work contacts.</p></li>
<li><p><strong>aS</strong> (<em>float</em><em>, </em><em>optional</em>) – Scale factor for school contacts.</p></li>
<li><p><strong>aO</strong> (<em>float</em><em>, </em><em>optional</em>) – Scale factor for other contacts.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>contactMatrix</strong> – A function that takes t as an argument and outputs the contact matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyross.contactMatrix.ContactMatrixFunction.intervention_custom_temporal">
<code class="sig-name descname">intervention_custom_temporal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyross.contactMatrix.ContactMatrixFunction.intervention_custom_temporal" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom temporal interventions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intervention_func</strong> (<em>callable</em>) – The calling signature is <cite>intervention_func(t, **kwargs)</cite>,
where t is time and kwargs are other keyword arguments for the function.
The function must return (aW, aS, aO).</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Keyword arguments for the function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>contactMatrix</strong> – A function that takes t as an argument and outputs the contact matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>An example for an custom temporal intervetion that
allows for some anticipation and reaction time</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># using keyword arguments for parameters of the intervention</span>
<span class="go">        a = (1-np.tanh((t-loc)/width))/2</span>
<span class="go">        return a, a, a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contactMatrix</span> <span class="o">=</span> <span class="n">generator</span><span class="o">.</span><span class="n">intervention_custom_temporal</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyross.contactMatrix.ContactMatrixFunction.interventions_temporal">
<code class="sig-name descname">interventions_temporal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyross.contactMatrix.ContactMatrixFunction.interventions_temporal" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporal interventions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>np.array</em>) – Ordered array with temporal boundaries between the different interventions.</p></li>
<li><p><strong>interventions</strong> (<em>np.array</em>) – Ordered matrix with prefactors of CW, CS, CO matrices
during the different time intervals.
Note that len(interventions) = len(times) + 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>contactMatrix</strong> – A function that takes t as an argument and outputs the contact matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyross.contactMatrix.ContactMatrixFunction.interventions_threshold">
<code class="sig-name descname">interventions_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyross.contactMatrix.ContactMatrixFunction.interventions_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporal interventions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold</strong> (<em>np.array</em>) – Ordered array with temporal boundaries between the different interventions.</p></li>
<li><p><strong>interventions</strong> (<em>np.array</em>) – Array of shape [K+1,3] with prefactors during different phases of intervention
The current state of the intervention is defined by
the largest integer “index” such that state[j] &gt;= thresholds[index,j] for all j.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>contactMatrix</strong> – A function that takes t as an argument and outputs the contact matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="spatial-contact-matrix">
<h2>Spatial Contact Matrix<a class="headerlink" href="#spatial-contact-matrix" title="Permalink to this headline">¶</a></h2>
<p>Approximates the spatial contact matrix given the locations, populations and areas of
the geographical regions and the overall age structured contact matrix.</p>
<dl class="py class">
<dt id="pyross.contactMatrix.SpatialContactMatrix">
<em class="property">class </em><code class="sig-prename descclassname">pyross.contactMatrix.</code><code class="sig-name descname">SpatialContactMatrix</code><a class="headerlink" href="#pyross.contactMatrix.SpatialContactMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for generating a spatial compartmental model with commute data</p>
<p>Let <span class="math notranslate nohighlight">\(\mu, \nu\)</span> denote spatial index and i, j denote age group index.</p>
<div class="math notranslate nohighlight">
\[C^{\mu\nu}_{ij} = \frac{1}{N^\mu_i} \widetilde{C}^{\mu \nu}_{ij}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>b</strong> (<em>float</em>) – Parameter b in the above equation</p></li>
<li><p><strong>populations</strong> (<em>np.array</em><em>(</em><em>n_loc</em><em>, </em><em>M</em><em>)</em>) – Populations of regions by age groups. Here n_loc is the number of regions
and M is the number of age groups.</p></li>
<li><p><strong>areas</strong> (<em>np.array</em><em>(</em><em>n_loc</em><em>)</em>) – Areas of the geographical regions.</p></li>
<li><p><strong>commutes</strong> (<em>np.array</em><em>(</em><em>n_loc</em><em>, </em><em>n_loc</em><em>, </em><em>M</em><em>)</em>) – Each entry commute[mu, nu, i] needs to be the number of people of age
group i commuting from <span class="math notranslate nohighlight">\(\mu\)</span> to <span class="math notranslate nohighlight">\(\nu\)</span>.
Entries with <span class="math notranslate nohighlight">\(\mu = \nu\)</span> are ignored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyross.contactMatrix.getCM">
<code class="sig-prename descclassname">contactMatrix.</code><code class="sig-name descname">getCM</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyross.contactMatrix.getCM" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to compute contact matrices of a country</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>country</strong> (<em>string</em>) – Default is India</p></li>
<li><p><strong>CH</strong><strong>, </strong><strong>CW</strong><strong>, </strong><strong>CS</strong><strong>, </strong><strong>CO of the given country</strong> (<em>Returns</em>) – </p></li>
<li><p><strong>CH</strong> (<em>home</em><em>,</em>) – </p></li>
<li><p><strong>CW</strong> (<em>work</em><em>,</em>) – </p></li>
<li><p><strong>CS</strong> (<em>school</em><em>,</em>) – </p></li>
<li><p><strong>CO</strong> (<em>other locations</em>) – </p></li>
<li><p><strong>data is read from sheets at</strong> (<em>The</em>) – </p></li>
<li><p><strong>https</strong> (<em>//github.com/rajeshrinet/pyross/tree/master/examples/data/contact_matrices_152_countries</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyross.contactMatrix.characterise_transient">
<code class="sig-prename descclassname">contactMatrix.</code><code class="sig-name descname">characterise_transient</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyross.contactMatrix.characterise_transient" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the maximal eigenvalue (spectral abcissa),
initial groth rate (numerical abcissa),
the Kreiss constant (minimum bound of transient)
and time of transient growth</p>
<p>inputs:
A: an MxM matrix
tol: Used to find a first estimate of the pseudospectrum
theta: normalizing factor found in Townley et al 2007, default 0
ord: default 2, order of matrix norm</p>
<dl class="simple">
<dt>returns: [spectral abcissa, numerical abcissa, Kreiss constant ,</dt><dd><p>duration of transient, henrici’s departure from normalcy’]</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="forecast.html" class="btn btn-neutral float-left" title="Forecasting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Ronojoy Adhikari, Austen Bolitho, Fernando Caballero, Michael Cates, Jakub Dolezal, Timothy Ekeh, Jules Guioth, Robert Jack, Julian Kappler, Lukas Kikuchi, Irene Li, Joseph Peterson, Patrick Pietzonka, Benjamin Remez, Paul Rohrbach, Rajesh Singh, and Günther Turk

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>